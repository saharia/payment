{"version":3,"sources":["../../../../src/validation/custom/date-after/date-after.validate.ts"],"sourcesContent":["import {\n  registerDecorator,\n  ValidationArguments,\n  ValidationOptions,\n} from 'class-validator';\nimport * as moment from 'moment';\n\nexport function IsDateAfter<T>(\n  property: keyof T,\n  validationOptions?: ValidationOptions,\n) {\n  return (object: any, propertyName: string) => {\n    registerDecorator({\n      name: 'IsDateAfter',\n      target: object.constructor,\n      propertyName,\n      constraints: [property],\n      options: validationOptions,\n      validator: {\n        validate(value: any, args: ValidationArguments) {\n          const [relatedPropertyName] = args.constraints;\n          const relatedValue = (args.object as any)[relatedPropertyName];\n          const endDate = moment(value);\n          const startDate = moment(relatedValue);\n          // console.log(value, relatedValue, startDate.format(\"DD/MM/YYYY\"), endDate.format(\"DD/MM/YYYY\"))\n          return endDate.isSameOrAfter(startDate, 'date');\n        },\n\n        defaultMessage(args: ValidationArguments) {\n          const [relatedPropertyName] = args.constraints;\n          return `${propertyName} should be greater than or equal to ${relatedPropertyName}`;\n        },\n      },\n    });\n  };\n}"],"names":["IsDateAfter","property","validationOptions","object","propertyName","registerDecorator","name","target","constructor","constraints","options","validator","validate","value","args","relatedPropertyName","relatedValue","endDate","moment","startDate","isSameOrAfter","defaultMessage"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAOgBA;;;eAAAA;;;gCAHT;gEACiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEjB,SAASA,YACdC,QAAiB,EACjBC,iBAAqC;IAErC,OAAO,CAACC,QAAaC;QACnBC,IAAAA,iCAAiB,EAAC;YAChBC,MAAM;YACNC,QAAQJ,OAAOK,WAAW;YAC1BJ;YACAK,aAAa;gBAACR;aAAS;YACvBS,SAASR;YACTS,WAAW;gBACTC,UAASC,KAAU,EAAEC,IAAyB;oBAC5C,MAAM,CAACC,oBAAoB,GAAGD,KAAKL,WAAW;oBAC9C,MAAMO,eAAe,AAACF,KAAKX,MAAM,AAAQ,CAACY,oBAAoB;oBAC9D,MAAME,UAAUC,QAAOL;oBACvB,MAAMM,YAAYD,QAAOF;oBACzB,iGAAiG;oBACjG,OAAOC,QAAQG,aAAa,CAACD,WAAW;gBAC1C;gBAEAE,gBAAeP,IAAyB;oBACtC,MAAM,CAACC,oBAAoB,GAAGD,KAAKL,WAAW;oBAC9C,OAAO,CAAC,EAAEL,aAAa,oCAAoC,EAAEW,oBAAoB,CAAC;gBACpF;YACF;QACF;IACF;AACF"}