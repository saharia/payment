{"version":3,"sources":["../../../src/common/filter/api-service-exception.filter.ts"],"sourcesContent":["import { ArgumentsHost, Catch, ExceptionFilter } from '@nestjs/common';\nimport { GraphQLError } from 'graphql';\n\n@Catch()\nexport class ApiServiceExceptionFilter implements ExceptionFilter {\n  catch(exception: any, host: ArgumentsHost) {\n    const ctx = host.switchToRpc();\n    let status = exception.getStatus ? exception.getStatus() : 500;\n    let message = exception.message;\n    const responseMessage = exception.getResponse ? exception.getResponse() : null;\n    let errorResponse = {\n      isError: true,\n      code: status,\n      timestamp: new Date().toTimeString(),\n      message,\n      responseMessage: responseMessage,\n    };\n    if(exception.isError) {\n      // console.log(\"===================Exception from service ==================\");\n      errorResponse = exception;\n    }\n    console.log(errorResponse);\n    // console.log(\"Micro service exception filter ====>\", message);\n    // console.log(errorResponse);\n    throw new GraphQLError(message, {\n      extensions: errorResponse,\n    });\n  }\n}"],"names":["ApiServiceExceptionFilter","catch","exception","host","ctx","switchToRpc","status","getStatus","message","responseMessage","getResponse","errorResponse","isError","code","timestamp","Date","toTimeString","console","log","GraphQLError","extensions","Catch"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAIaA;;;eAAAA;;;wBAJyC;yBACzB;;;;;;;AAGtB,IAAA,AAAMA,4BAAN,MAAMA;IACXC,MAAMC,SAAc,EAAEC,IAAmB,EAAE;QACzC,MAAMC,MAAMD,KAAKE,WAAW;QAC5B,IAAIC,SAASJ,UAAUK,SAAS,GAAGL,UAAUK,SAAS,KAAK;QAC3D,IAAIC,UAAUN,UAAUM,OAAO;QAC/B,MAAMC,kBAAkBP,UAAUQ,WAAW,GAAGR,UAAUQ,WAAW,KAAK;QAC1E,IAAIC,gBAAgB;YAClBC,SAAS;YACTC,MAAMP;YACNQ,WAAW,IAAIC,OAAOC,YAAY;YAClCR;YACAC,iBAAiBA;QACnB;QACA,IAAGP,UAAUU,OAAO,EAAE;YACpB,+EAA+E;YAC/ED,gBAAgBT;QAClB;QACAe,QAAQC,GAAG,CAACP;QACZ,gEAAgE;QAChE,8BAA8B;QAC9B,MAAM,IAAIQ,qBAAY,CAACX,SAAS;YAC9BY,YAAYT;QACd;IACF;AACF;AAxBaX;IADZqB,IAAAA,aAAK;GACOrB"}