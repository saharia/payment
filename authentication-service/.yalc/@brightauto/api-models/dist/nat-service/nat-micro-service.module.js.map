{"version":3,"sources":["../../src/nat-service/nat-micro-service.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\nimport { ConfigModule, ConfigService } from '@nestjs/config';\nimport { ClientProxyFactory, Transport } from '@nestjs/microservices';\nimport { NatService } from './nat.service';\n\n@Module({\n  imports: [\n  ],\n  providers: [\n    NatService,\n    {\n      provide: 'NAT_SERVICE',\n      useFactory: async (configService: ConfigService) => {\n        return await ClientProxyFactory.create({\n          transport: Transport.NATS,\n          options: {\n            servers: configService.get('NAT_SERVERS') ? configService.get('NAT_SERVERS').split(',') : [],\n            headers: { 'x-version': '1.0.0' },\n          },\n        })\n      },\n      inject: [ConfigService]\n    },\n    ConfigModule\n  ],\n  exports: [\n    'NAT_SERVICE',\n    NatService,\n  ]\n})\nexport class NatMicroServiceModule {}\n"],"names":["NatMicroServiceModule","Module","imports","providers","NatService","provide","useFactory","configService","ClientProxyFactory","create","transport","Transport","NATS","options","servers","get","split","headers","inject","ConfigService","ConfigModule","exports"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA8BaA;;;eAAAA;;;wBA9BU;wBACqB;+BACE;4BACnB;;;;;;;AA2BpB,IAAA,AAAMA,wBAAN,MAAMA;AAAuB;AAAvBA;IAzBZC,IAAAA,cAAM,EAAC;QACNC,SAAS,EACR;QACDC,WAAW;YACTC,sBAAU;YACV;gBACEC,SAAS;gBACTC,YAAY,OAAOC;oBACjB,OAAO,MAAMC,iCAAkB,CAACC,MAAM,CAAC;wBACrCC,WAAWC,wBAAS,CAACC,IAAI;wBACzBC,SAAS;4BACPC,SAASP,cAAcQ,GAAG,CAAC,iBAAiBR,cAAcQ,GAAG,CAAC,eAAeC,KAAK,CAAC,OAAO,EAAE;4BAC5FC,SAAS;gCAAE,aAAa;4BAAQ;wBAClC;oBACF;gBACF;gBACAC,QAAQ;oBAACC,qBAAa;iBAAC;YACzB;YACAC,oBAAY;SACb;QACDC,SAAS;YACP;YACAjB,sBAAU;SACX;IACH;GACaJ"}