{"version":3,"sources":["../../../src/common/filter/micro-service-exception.filter.ts"],"sourcesContent":["import { ArgumentsHost, Catch, ExceptionFilter } from '@nestjs/common';\nimport { throwError } from 'rxjs';\n\n@Catch()\nexport class MicroServiceExceptionFilter implements ExceptionFilter {\n  catch(exception: any, host: ArgumentsHost) {\n    const ctx = host.switchToRpc();\n    let status = exception.getStatus ? exception.getStatus() : 500;\n    let message = exception.message;\n    const responseMessage = exception.getResponse ? exception.getResponse() : null;\n    let errorResponse = {\n      isError: true,\n      code: status,\n      timestamp: new Date().toTimeString(),\n      message,\n      responseMessage: responseMessage,\n    };\n    if(exception.isError) {\n      // console.log(\"===================Exception from service ==================\");\n      errorResponse = exception;\n    }\n    // console.log(\"Micro service exception filter ====>\", message);\n    // console.log(errorResponse);\n    return throwError(() => errorResponse);\n  }\n}"],"names":["MicroServiceExceptionFilter","catch","exception","host","ctx","switchToRpc","status","getStatus","message","responseMessage","getResponse","errorResponse","isError","code","timestamp","Date","toTimeString","throwError","Catch"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAIaA;;;eAAAA;;;wBAJyC;sBAC3B;;;;;;;AAGpB,IAAA,AAAMA,8BAAN,MAAMA;IACXC,MAAMC,SAAc,EAAEC,IAAmB,EAAE;QACzC,MAAMC,MAAMD,KAAKE,WAAW;QAC5B,IAAIC,SAASJ,UAAUK,SAAS,GAAGL,UAAUK,SAAS,KAAK;QAC3D,IAAIC,UAAUN,UAAUM,OAAO;QAC/B,MAAMC,kBAAkBP,UAAUQ,WAAW,GAAGR,UAAUQ,WAAW,KAAK;QAC1E,IAAIC,gBAAgB;YAClBC,SAAS;YACTC,MAAMP;YACNQ,WAAW,IAAIC,OAAOC,YAAY;YAClCR;YACAC,iBAAiBA;QACnB;QACA,IAAGP,UAAUU,OAAO,EAAE;YACpB,+EAA+E;YAC/ED,gBAAgBT;QAClB;QACA,gEAAgE;QAChE,8BAA8B;QAC9B,OAAOe,IAAAA,gBAAU,EAAC,IAAMN;IAC1B;AACF;AArBaX;IADZkB,IAAAA,aAAK;GACOlB"}